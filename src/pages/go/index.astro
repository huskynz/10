---
import { URL } from 'url';
import { predefinedUrls } from '@lib/rurl'; // Import your predefined URLs

// Get the full URL
const url = new URL(Astro.request.url);

// Extract the `linkid` query parameter
const linkid = url.searchParams.get('linkid') ?? ''; // Provide a default value of empty string

// Find the correct link or provide a default
const targetUrl = predefinedUrls[linkid as keyof typeof predefinedUrls] || '/';  // Default to home if no valid linkid is found

// Perform the redirection
return new Response(null, {
    status: 302,
    headers: {
      Location: targetUrl,
    }})
---

<!DOCTYPE html>
<html>
<head>
  <title>Redirecting...</title>
</head>
<body>
  <p>Redirecting you...</p>
</body>
</html>

